import{d as Q,z as j,p as G,r as i,P as H,e as J,o as W,s as X,c as N,f as o,h as l,u as t,w as a,B as k,l as B,k as P,Q as Y,N as U,m as n,R as V,S as f,t as u,U as A,D as M,v as Z,n as h,V as I,F as T,x as ee,b as y,K as E}from"./index-DcBfBbp_.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const le={class:"checkout-page"},ae={class:"nav"},oe={class:"nav-content"},se={class:"content"},ne={style:{"margin-top":"24px"}},re={style:{"margin-top":"24px","padding-top":"16px","border-top":"1px solid #eee"}},ie={style:{"font-size":"20px","margin-bottom":"16px"}},ue={style:{color:"#d03050"}},de={style:{"margin-top":"24px"}},pe={style:{"margin-top":"24px"}},ve={style:{"text-align":"center",padding:"24px",background:"#f5f5f5","border-radius":"8px"}},me={style:{"font-size":"20px",color:"#1a472a"}},fe={style:{"text-align":"center",padding:"24px"}},ye={style:{color:"#999","margin-bottom":"16px"}},ce={style:{"margin-top":"24px","text-align":"center"}},ge=Q({__name:"Checkout",setup(xe){const _=X(),F=H(),p=j(),O=G(),R=i(F.query.plan||"yearly"),v=J(()=>{const s={trial:{name:"è¯•ç”¨ç‰ˆ",price:0,period:"7å¤©"},monthly:{name:"æœˆåº¦ç‰ˆ",price:99,period:"æœˆ"},yearly:{name:"å¹´åº¦ç‰ˆ",price:899,period:"å¹´"},lifetime:{name:"ç»ˆèº«ç‰ˆ",price:2999,period:"æ°¸ä¹…"}};return s[R.value]||s.yearly}),m=i(1),b=i(""),S=i(!1),c=i(!1),g=i(""),x=i(v.value.price),w=i(!1),d=i(null),C=i(""),z=i(!1),$=async()=>{if(!b.value.trim()){c.value=!1,g.value="",x.value=v.value.price;return}S.value=!0;try{const s=await ee.checkCode(b.value.trim());s.code===200?(c.value=!0,g.value=`âœ“ ${s.data.name}`,x.value=0):(c.value=!1,g.value=s.message||"ä¿ƒé”€ç æ— æ•ˆ",x.value=v.value.price)}catch{c.value=!1,g.value="æ£€æŸ¥å¤±è´¥",x.value=v.value.price}finally{S.value=!1}},q=async()=>{w.value=!0;try{const s=await E.createOrder(R.value,c.value?b.value:void 0);s.code===200?(d.value=s.data,s.data.license_key?(m.value=3,p.success("æˆæƒå·²ç”Ÿæˆï¼")):m.value=2):p.error(s.message||"åˆ›å»ºè®¢å•å¤±è´¥")}catch(s){p.error(s.message||"åˆ›å»ºè®¢å•å¤±è´¥")}finally{w.value=!1}},K=async()=>{if(!C.value.trim()){p.warning("è¯·è¾“å…¥æ”¯ä»˜å‡­è¯å›¾ç‰‡åœ°å€");return}if(d.value){z.value=!0;try{const s=await E.uploadPaymentProof(d.value.order_id,C.value);s.code===200?(p.success("å‡­è¯å·²æäº¤ï¼Œè¯·ç­‰å¾…å®¡æ ¸"),m.value=3):p.error(s.message||"æäº¤å¤±è´¥")}catch{p.error("æäº¤å¤±è´¥")}finally{z.value=!1}}};return W(()=>{O.token||_.push("/login")}),(s,e)=>(y(),N("div",le,[o("header",ae,[o("div",oe,[o("div",{class:"logo",onClick:e[0]||(e[0]=r=>t(_).push("/"))},"ğŸƒ èŒ—ç®¡å®¶"),l(t(k),{text:"",onClick:e[1]||(e[1]=r=>t(_).push("/dashboard"))},{default:a(()=>[...e[6]||(e[6]=[n("è¿”å›æ§åˆ¶å°",-1)])]),_:1})])]),o("main",se,[e[21]||(e[21]=o("h1",null,"è´­ä¹°æˆæƒ",-1)),l(t(Y),{current:m.value,style:{margin:"32px 0"}},{default:a(()=>[l(t(V),{title:"ç¡®è®¤è®¢å•"}),l(t(V),{title:"æ”¯ä»˜"}),l(t(V),{title:"å®Œæˆ"})]),_:1},8,["current"]),m.value===1?(y(),B(t(U),{key:0},{default:a(()=>[l(t(A),{column:1,"label-placement":"left"},{default:a(()=>[l(t(f),{label:"å¥—é¤"},{default:a(()=>[n(u(v.value.name),1)]),_:1}),l(t(f),{label:"æœ‰æ•ˆæœŸ"},{default:a(()=>[n(u(v.value.period),1)]),_:1}),l(t(f),{label:"åŸä»·"},{default:a(()=>[n(" Â¥"+u(v.value.price),1)]),_:1})]),_:1}),o("div",ne,[e[8]||(e[8]=o("div",{style:{"margin-bottom":"8px"}},"ä¿ƒé”€ç ï¼ˆå¯é€‰ï¼‰",-1)),l(t(Z),null,{default:a(()=>[l(t(M),{value:b.value,"onUpdate:value":e[2]||(e[2]=r=>b.value=r),placeholder:"è¾“å…¥ä¿ƒé”€ç ",style:{width:"200px"},onBlur:$},null,8,["value"]),l(t(k),{loading:S.value,onClick:$},{default:a(()=>[...e[7]||(e[7]=[n("éªŒè¯",-1)])]),_:1},8,["loading"])]),_:1}),g.value?(y(),N("div",{key:0,style:h({color:c.value?"#18a058":"#d03050",marginTop:"8px"})},u(g.value),5)):P("",!0)]),o("div",re,[o("div",ie,[e[9]||(e[9]=n(" åº”ä»˜é‡‘é¢ï¼š",-1)),o("strong",ue,"Â¥"+u(x.value),1)]),l(t(k),{type:"primary",size:"large",loading:w.value,onClick:q},{default:a(()=>[n(u(x.value>0?"æäº¤è®¢å•":"å…è´¹é¢†å–"),1)]),_:1},8,["loading"])])]),_:1})):P("",!0),m.value===2?(y(),B(t(U),{key:1,title:"æ”¯ä»˜ä¿¡æ¯"},{default:a(()=>[l(t(I),{type:"info",style:{"margin-bottom":"24px"}},{default:a(()=>[...e[10]||(e[10]=[n(" è¯·è½¬è´¦è‡³ä»¥ä¸‹è´¦æˆ·ï¼Œè½¬è´¦å®Œæˆåä¸Šä¼ æ”¯ä»˜å‡­è¯ ",-1)])]),_:1}),l(t(A),{column:1,"label-placement":"left"},{default:a(()=>[l(t(f),{label:"è®¢å•å·"},{default:a(()=>{var r;return[n(u((r=d.value)==null?void 0:r.order_no),1)]}),_:1}),l(t(f),{label:"é‡‘é¢"},{default:a(()=>{var r;return[n("Â¥"+u((r=d.value)==null?void 0:r.amount),1)]}),_:1}),l(t(f),{label:"æ”¶æ¬¾æ–¹å¼"},{default:a(()=>[...e[11]||(e[11]=[n("é“¶è¡Œè½¬è´¦ / æ”¯ä»˜å® / å¾®ä¿¡",-1)])]),_:1}),l(t(f),{label:"æ”¶æ¬¾è´¦æˆ·"},{default:a(()=>[...e[12]||(e[12]=[o("div",null,"æ”¯ä»˜å®/å¾®ä¿¡ï¼šè¯·è”ç³»å®¢æœè·å–æ”¶æ¬¾ç ",-1),o("div",null,"é“¶è¡Œè´¦æˆ·ï¼šè¯·è”ç³»å®¢æœè·å–",-1)])]),_:1})]),_:1}),o("div",de,[e[13]||(e[13]=o("div",{style:{"margin-bottom":"8px"}},"ä¸Šä¼ æ”¯ä»˜å‡­è¯ï¼ˆå›¾ç‰‡URLï¼‰",-1)),l(t(M),{value:C.value,"onUpdate:value":e[3]||(e[3]=r=>C.value=r),placeholder:"è¾“å…¥æ”¯ä»˜æˆªå›¾çš„å›¾ç‰‡åœ°å€"},null,8,["value"]),e[14]||(e[14]=o("div",{style:{"margin-top":"8px",color:"#999","font-size":"12px"}}," æç¤ºï¼šå¯å°†æˆªå›¾ä¸Šä¼ è‡³å›¾åºŠåç²˜è´´é“¾æ¥ ",-1))]),o("div",pe,[l(t(k),{type:"primary",loading:z.value,onClick:K},{default:a(()=>[...e[15]||(e[15]=[n(" æäº¤å‡­è¯ ",-1)])]),_:1},8,["loading"])])]),_:1})):P("",!0),m.value===3?(y(),B(t(U),{key:2},{default:a(()=>{var r,D;return[(r=d.value)!=null&&r.license_key?(y(),N(T,{key:0},[l(t(I),{type:"success",title:"æˆæƒå·²ç”Ÿæˆï¼",style:{"margin-bottom":"24px"}},{default:a(()=>[...e[16]||(e[16]=[n(" è¯·åœ¨èŒ—ç®¡å®¶ ERP è½¯ä»¶ä¸­è¾“å…¥ä»¥ä¸‹æˆæƒç è¿›è¡Œæ¿€æ´» ",-1)])]),_:1}),o("div",ve,[e[17]||(e[17]=o("div",{style:{"font-size":"12px",color:"#999","margin-bottom":"8px"}},"æ‚¨çš„æˆæƒç ",-1)),o("code",me,u(d.value.license_key),1)])],64)):(y(),N(T,{key:1},[l(t(I),{type:"info",title:"å‡­è¯å·²æäº¤",style:{"margin-bottom":"24px"}},{default:a(()=>[...e[18]||(e[18]=[n(" æˆ‘ä»¬å°†åœ¨ 1-2 ä¸ªå·¥ä½œæ—¥å†…å®¡æ ¸æ‚¨çš„æ”¯ä»˜å‡­è¯ï¼Œå®¡æ ¸é€šè¿‡åå°†è‡ªåŠ¨ç”Ÿæˆæˆæƒç ã€‚ ",-1)])]),_:1}),o("div",fe,[o("div",ye," è®¢å•å·ï¼š"+u((D=d.value)==null?void 0:D.order_no),1),l(t(k),{onClick:e[4]||(e[4]=L=>t(_).push("/orders"))},{default:a(()=>[...e[19]||(e[19]=[n("æŸ¥çœ‹æˆ‘çš„è®¢å•",-1)])]),_:1})])],64)),o("div",ce,[l(t(k),{text:"",type:"primary",onClick:e[5]||(e[5]=L=>t(_).push("/licenses"))},{default:a(()=>[...e[20]||(e[20]=[n("æŸ¥çœ‹æˆ‘çš„æˆæƒ",-1)])]),_:1})])]}),_:1})):P("",!0)])]))}}),be=te(ge,[["__scopeId","data-v-ab47471c"]]);export{be as default};
