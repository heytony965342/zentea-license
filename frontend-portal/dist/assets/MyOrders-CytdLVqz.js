import{d as w,p as x,r as y,o as h,c as f,f as d,h as s,u as a,s as $,w as n,v as m,N as M,K as B,B as r,m as i,k as S,M as z,O as c,J as D,b as v}from"./index-DcBfBbp_.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"orders-page"},V={class:"nav"},L={class:"nav-content"},j={class:"content"},A={key:0,class:"empty"},E=w({__name:"MyOrders",setup(F){const l=$(),k=x(),u=y([]),p=y(!1),g={monthly:"æœˆåº¦ç‰ˆ",yearly:"å¹´åº¦ç‰ˆ",lifetime:"ç»ˆèº«ç‰ˆ",trial:"è¯•ç”¨ç‰ˆ"},_={pending:{label:"å¾…æ”¯ä»˜",type:"warning"},paid:{label:"å·²æ”¯ä»˜",type:"success"},cancelled:{label:"å·²å–æ¶ˆ",type:"default"},refunded:{label:"å·²é€€æ¬¾",type:"error"}},C=[{title:"è®¢å•å·",key:"order_no",width:180},{title:"å¥—é¤",key:"plan_type",width:100,render:t=>g[t.plan_type]||t.plan_type},{title:"é‡‘é¢",key:"amount",width:100,render:t=>t.amount>0?`Â¥${t.amount.toFixed(2)}`:"å…è´¹"},{title:"çŠ¶æ€",key:"status",width:90,render:t=>{const e=_[t.status]||{label:t.status,type:"info"};return c(D,{type:e.type,size:"small"},()=>e.label)}},{title:"åˆ›å»ºæ—¶é—´",key:"created_at",width:160,render:t=>new Date(t.created_at).toLocaleString("zh-CN")},{title:"æ”¯ä»˜æ—¶é—´",key:"paid_at",width:160,render:t=>t.paid_at?new Date(t.paid_at).toLocaleString("zh-CN"):"-"},{title:"æ“ä½œ",key:"actions",width:100,render:t=>t.status==="pending"&&t.amount>0?c(r,{size:"small",type:"primary",onClick:()=>N(t)},()=>"å»æ”¯ä»˜"):null}],b=async()=>{p.value=!0;try{const t=await B.getMyOrders();t.code===200&&(u.value=t.data||[])}catch{u.value=[]}finally{p.value=!1}},N=t=>{l.push(`/checkout?order_id=${t.id}`)};return h(b),(t,e)=>(v(),f("div",T,[d("header",V,[d("div",L,[d("div",{class:"logo",onClick:e[0]||(e[0]=o=>a(l).push("/"))},"ğŸƒ èŒ—ç®¡å®¶"),s(a(m),null,{default:n(()=>[s(a(r),{text:"",onClick:e[1]||(e[1]=o=>a(l).push("/dashboard"))},{default:n(()=>[...e[6]||(e[6]=[i("æ§åˆ¶å°",-1)])]),_:1}),s(a(r),{text:"",onClick:e[2]||(e[2]=o=>a(l).push("/licenses"))},{default:n(()=>[...e[7]||(e[7]=[i("æˆ‘çš„æˆæƒ",-1)])]),_:1}),s(a(r),{text:"",onClick:e[3]||(e[3]=o=>a(l).push("/pricing"))},{default:n(()=>[...e[8]||(e[8]=[i("è´­ä¹°",-1)])]),_:1}),s(a(r),{onClick:e[4]||(e[4]=o=>{a(k).logout(),a(l).push("/")})},{default:n(()=>[...e[9]||(e[9]=[i("é€€å‡º",-1)])]),_:1})]),_:1})])]),d("main",j,[s(a(m),{justify:"space-between",align:"center"},{default:n(()=>[e[11]||(e[11]=d("h1",null,"æˆ‘çš„è®¢å•",-1)),s(a(r),{type:"primary",onClick:e[5]||(e[5]=o=>a(l).push("/pricing"))},{default:n(()=>[...e[10]||(e[10]=[i("è´­ä¹°æˆæƒ",-1)])]),_:1})]),_:1}),s(a(M),{style:{"margin-top":"24px"}},{default:n(()=>[s(a(z),{columns:C,data:u.value,loading:p.value,bordered:!1,"row-key":o=>o.id},null,8,["data","loading","row-key"]),!p.value&&u.value.length===0?(v(),f("div",A," æš‚æ— è®¢å•è®°å½• ")):S("",!0)]),_:1})])]))}}),K=O(E,[["__scopeId","data-v-c0e7c42b"]]);export{K as default};
