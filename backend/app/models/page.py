"""
页面内容模型
用于存储可编辑的静态页面内容
"""
from datetime import datetime
from typing import Optional
from sqlmodel import SQLModel, Field


class Page(SQLModel, table=True):
    """页面内容表"""
    __tablename__ = "pages"
    
    id: Optional[int] = Field(default=None, primary_key=True)
    slug: str = Field(index=True, unique=True, description="URL标识（如 features, pricing）")
    title: str = Field(description="页面标题")
    subtitle: Optional[str] = Field(default=None, description="页面副标题")
    content: str = Field(default="", description="页面内容（Markdown 或 HTML）")
    meta_description: Optional[str] = Field(default=None, description="SEO 描述")
    status: str = Field(default="published", description="状态：draft/published")
    sort_order: int = Field(default=0, description="排序顺序")
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)


# 预定义的页面
DEFAULT_PAGES = [
    {
        "slug": "features",
        "title": "功能介绍",
        "subtitle": "全方位茶企管理解决方案",
        "content": """## 智能进销存管理

茗管家 ERP 系统提供完整的进销存管理功能，帮助茶企高效管理库存、采购和销售。

### 核心功能

#### 📦 采购管理
- **供应商管理**：建立完整的供应商档案，记录合作历史
- **采购订单**：支持多种采购模式，自动生成采购建议
- **入库管理**：扫码入库，自动更新库存

#### 📊 库存管理
- **多仓库支持**：支持多仓库、多库位管理
- **批次追溯**：茶叶批次追溯，品质可控
- **库存预警**：智能库存预警，避免缺货或积压

#### 💰 销售管理
- **订单处理**：快速开单，支持多种支付方式
- **客户管理**：完整的客户档案和跟进记录
- **销售分析**：多维度销售数据分析

#### 📈 报表中心
- **实时看板**：经营数据一目了然
- **自定义报表**：灵活配置所需报表
- **数据导出**：支持 Excel 导出

---

## 移动端支持

支持 iOS 和 Android 移动端，随时随地管理您的茶企业务。

- 移动审批，出差也能处理业务
- 实时库存查询
- 移动开单，茶园也能销售
""",
        "meta_description": "茗管家 ERP 系统功能介绍，包括进销存管理、财务管理、客户管理等全方位茶企解决方案",
        "status": "published",
        "sort_order": 1,
    },
    {
        "slug": "pricing",
        "title": "价格方案",
        "subtitle": "灵活的定价，满足不同规模茶企需求",
        "content": """## 选择适合您的方案

我们提供灵活的定价方案，无论您是小型茶铺还是大型茶企，都能找到合适的选择。

---

### 🌱 基础版
**¥299/月** 或 ¥2,999/年（省 ¥589）

适合小型茶铺和个体经营者

- ✅ 进销存基础功能
- ✅ 最多 3 个用户
- ✅ 1 个仓库
- ✅ 基础报表
- ✅ 微信小程序
- ✅ 邮件支持

---

### 🍃 专业版
**¥599/月** 或 ¥5,999/年（省 ¥1,189）

适合中小型茶企

- ✅ 全部基础版功能
- ✅ 最多 10 个用户
- ✅ 5 个仓库
- ✅ 高级报表与分析
- ✅ 移动端 APP
- ✅ AI 智能助手
- ✅ 优先客服支持

---

### 🏆 企业版
**定制报价**

适合大型茶企和连锁品牌

- ✅ 全部专业版功能
- ✅ 无限用户
- ✅ 无限仓库
- ✅ 多门店管理
- ✅ API 接口
- ✅ 定制开发
- ✅ 专属客户经理
- ✅ 上门培训

---

## 常见问题

**Q: 可以免费试用吗？**
A: 是的，所有方案都提供 7 天免费试用，无需绑定信用卡。

**Q: 如何升级或降级方案？**
A: 您可以随时在后台升级方案，费用按比例计算。降级将在当前周期结束后生效。

**Q: 数据安全如何保障？**
A: 我们采用银行级加密技术，数据每日自动备份，确保您的业务数据安全。
""",
        "meta_description": "茗管家 ERP 定价方案，基础版、专业版、企业版灵活选择，7天免费试用",
        "status": "published",
        "sort_order": 2,
    },
    {
        "slug": "docs",
        "title": "使用文档",
        "subtitle": "快速上手茗管家 ERP 系统",
        "content": """## 快速开始

欢迎使用茗管家 ERP 系统！本文档将帮助您快速上手。

---

### 1. 注册与登录

1. 访问 [茗管家官网](/) 点击"免费注册"
2. 填写企业信息和管理员账号
3. 验证邮箱后即可登录

### 2. 初始设置

登录后，建议按以下顺序完成初始设置：

#### 2.1 基础信息
- 完善企业资料
- 设置仓库信息
- 配置计量单位

#### 2.2 商品管理
- 创建商品分类
- 录入茶叶商品
- 设置商品属性（产地、年份、等级等）

#### 2.3 人员设置
- 添加员工账号
- 分配角色权限

---

### 3. 日常操作

#### 采购入库
1. 进入【采购管理】-【采购订单】
2. 选择供应商，添加采购商品
3. 提交订单，等待审批
4. 审批通过后，进行入库操作

#### 销售出库
1. 进入【销售管理】-【销售订单】
2. 选择客户，添加销售商品
3. 确认价格和数量
4. 提交并打印单据

#### 库存盘点
1. 进入【库存管理】-【库存盘点】
2. 创建盘点单
3. 录入实际库存
4. 系统自动计算盈亏

---

### 4. 移动端使用

下载茗管家 APP：
- iOS: App Store 搜索"茗管家"
- Android: 各大应用市场搜索"茗管家"

移动端主要功能：
- 库存查询
- 移动开单
- 订单审批
- 数据看板

---

## 视频教程

我们提供了详细的视频教程，帮助您更快上手：

- [5分钟快速入门](javascript:void(0))
- [商品管理详解](javascript:void(0))
- [进销存操作流程](javascript:void(0))
- [报表分析使用](javascript:void(0))

---

如需更多帮助，请联系我们的客服团队。
""",
        "meta_description": "茗管家 ERP 使用文档，快速上手指南，操作教程",
        "status": "published",
        "sort_order": 3,
    },
    {
        "slug": "faq",
        "title": "常见问题",
        "subtitle": "您关心的问题，这里都有答案",
        "content": """## 账号相关

### Q: 如何注册账号？
访问茗管家官网，点击"免费注册"按钮，填写企业信息和管理员信息即可完成注册。注册后可享受 7 天免费试用。

### Q: 忘记密码怎么办？
在登录页面点击"忘记密码"，输入注册邮箱，系统会发送密码重置链接到您的邮箱。

### Q: 如何修改企业信息？
登录后进入【系统设置】-【企业信息】，即可修改企业名称、联系方式等信息。

---

## 功能使用

### Q: 如何添加新员工？
管理员登录后，进入【系统设置】-【用户管理】，点击"添加用户"，填写员工信息并分配角色权限。

### Q: 如何导入历史数据？
系统支持 Excel 批量导入，进入【数据管理】-【数据导入】，下载模板，填写数据后上传即可。

### Q: 支持多仓库管理吗？
专业版及以上支持多仓库管理。进入【库存管理】-【仓库设置】即可添加和管理多个仓库。

### Q: 如何设置审批流程？
进入【系统设置】-【审批配置】，可以为采购、销售等业务设置多级审批流程。

---

## 付费相关

### Q: 支持哪些支付方式？
支持支付宝、微信支付、银行转账等多种支付方式。企业版客户还可申请对公转账。

### Q: 发票如何开具？
付款成功后，在【订单管理】中申请开票，填写开票信息，我们将在 3 个工作日内开具电子发票。

### Q: 不满意可以退款吗？
7 天试用期内可无条件退款。正式付费后，如因产品问题无法使用，可联系客服协商退款。

---

## 数据安全

### Q: 数据存储在哪里？
所有数据存储在阿里云服务器，采用银行级加密技术，确保数据安全。

### Q: 数据会定期备份吗？
系统每日自动备份，保留最近 30 天的备份数据。企业版客户可申请更长的备份周期。

### Q: 可以导出自己的数据吗？
可以。进入【数据管理】-【数据导出】，可导出商品、客户、订单等各类数据的 Excel 文件。

---

还有其他问题？请联系我们的客服团队。
""",
        "meta_description": "茗管家 ERP 常见问题解答，账号、功能、付费、数据安全相关问题",
        "status": "published",
        "sort_order": 4,
    },
    {
        "slug": "contact",
        "title": "客服热线",
        "subtitle": "我们随时为您服务",
        "content": """## 联系我们

我们提供多种联系方式，随时为您解答问题。

---

### 📞 客服热线

**400-888-8888**

服务时间：周一至周五 9:00-18:00

---

### 💬 在线客服

点击页面右下角的客服图标，即可与在线客服实时沟通。

在线服务时间：周一至周日 9:00-21:00

---

### 📧 邮件支持

**support@zentea.com**

我们会在 24 小时内回复您的邮件。

---

### 💼 商务合作

如有商务合作意向，请联系：

- 邮箱：business@zentea.com
- 电话：400-888-8889

---

### 🏢 公司地址

浙江省杭州市西湖区xxx路xxx号

---

## 意见反馈

您的建议对我们很重要！如有任何产品建议或意见，欢迎通过以下方式反馈：

- 在线客服留言
- 发送邮件至 feedback@zentea.com
- 在 APP 内【我的】-【意见反馈】提交

---

感谢您选择茗管家！
""",
        "meta_description": "茗管家客服联系方式，电话、在线客服、邮件支持",
        "status": "published",
        "sort_order": 5,
    },
    {
        "slug": "business",
        "title": "商务合作",
        "subtitle": "携手共创茶产业数字化未来",
        "content": """## 合作模式

茗管家诚邀各类合作伙伴，共同推动茶产业数字化升级。

---

### 🤝 渠道代理

成为茗管家区域代理商，享受丰厚的代理收益。

**代理权益：**
- 区域独家代理权
- 高比例销售分成
- 专业培训支持
- 市场推广支持
- 技术支持保障

**合作要求：**
- 具备茶行业资源
- 有 ToB 销售经验
- 认可茗管家理念

---

### 🔗 系统集成

如果您是软件开发商或系统集成商，欢迎接入茗管家开放平台。

**开放能力：**
- RESTful API 接口
- Webhook 事件推送
- 单点登录（SSO）
- 数据同步服务

**适用场景：**
- ERP 系统对接
- 电商平台对接
- 财务软件对接
- 自定义开发

---

### 🏭 行业合作

我们欢迎茶产业上下游企业的战略合作。

**合作方向：**
- 茶叶供应链合作
- 仓储物流合作
- 金融服务合作
- 行业协会合作

---

### 📢 市场合作

**合作形式：**
- 联合营销活动
- 内容合作
- 展会合作
- 媒体合作

---

## 联系商务团队

**商务热线：** 400-888-8889

**商务邮箱：** business@zentea.com

**工作时间：** 周一至周五 9:00-18:00

---

请留下您的联系方式，我们的商务经理会在 1 个工作日内与您联系。

---

期待与您的合作！
""",
        "meta_description": "茗管家商务合作，渠道代理、系统集成、行业合作",
        "status": "published",
        "sort_order": 6,
    },
]


