import{d as w,u as P,r as p,F as v,c as N,b as i,w as o,e as n,N as x,a7 as g,L as C,B as l,k as z,v as t,T as f,Q as b,z as B,f as T,o as D}from"./index-g5hkaJ8F.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"pages-page"},I=w({__name:"Pages",setup(M){const d=T(),s=P(),r=p(!1),u=p([]),m=[{title:"ID",key:"id",width:60},{title:"页面标识",key:"slug",width:120,render:e=>`/${e.slug}`},{title:"页面标题",key:"title",ellipsis:{tooltip:!0}},{title:"副标题",key:"subtitle",ellipsis:{tooltip:!0}},{title:"状态",key:"status",width:100,render:e=>e.status==="published"?t(f,{type:"success",size:"small"},{default:()=>"已发布"}):t(f,{type:"warning",size:"small"},{default:()=>"草稿"})},{title:"排序",key:"sort_order",width:80},{title:"更新时间",key:"updated_at",width:160,render:e=>e.updated_at?new Date(e.updated_at).toLocaleString("zh-CN"):"-"},{title:"操作",key:"actions",width:160,fixed:"right",render:e=>t(B,{},{default:()=>[t(l,{size:"small",type:"primary",onClick:()=>y(e.id)},{default:()=>"编辑"}),t(l,{size:"small",type:"info",onClick:()=>_(e.slug)},{default:()=>"预览"}),t(b,{onPositiveClick:()=>h(e.id)},{trigger:()=>t(l,{size:"small",type:"error"},{default:()=>"删除"}),default:()=>"确定要删除此页面吗？"})]})}],c=async()=>{r.value=!0;try{const e=await g.getList();e.code===200?u.value=e.data||[]:s.error(e.message||"加载失败")}catch{s.error("加载页面列表失败")}finally{r.value=!1}},y=e=>{d.push({name:"PageEdit",params:{id:e}})},_=e=>{window.open(`http://localhost:3002/${e}`,"_blank")},h=async e=>{try{const a=await g.delete(e);a.code===200?(s.success("删除成功"),c()):s.error(a.message||"删除失败")}catch{s.error("删除失败")}},k=()=>{d.push({name:"PageEdit",params:{id:"new"}})};return v(()=>{c()}),(e,a)=>(D(),N("div",L,[i(n(x),{title:"页面管理"},{"header-extra":o(()=>[i(n(l),{type:"primary",onClick:k},{default:o(()=>[...a[0]||(a[0]=[z(" ➕ 新建页面 ",-1)])]),_:1})]),default:o(()=>[i(n(C),{columns:m,data:u.value,loading:r.value,bordered:!1,"single-line":!1,"scroll-x":900},null,8,["data","loading"])]),_:1})]))}}),$=E(I,[["__scopeId","data-v-91486232"]]);export{$ as default};
