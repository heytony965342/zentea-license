import{d as N,u as k,r as c,F as C,c as D,b as l,w as s,e as a,z as x,N as p,p as h,H as w,m as B,B as z,f as M,k as r,q as S,M as T,O as o,C as i,P as V,K as L,v as R,Q as q,o as m}from"./index-BZbewaeb.js";const H=N({__name:"CustomerDetail",setup(A){const f=h(),y=M(),_=k(),u=c(!1),n=c(null),b={monthly:"月度版",yearly:"年度版",lifetime:"终身版",trial:"试用版",promo_free:"限免版",free_forever:"永久免费"},v={pending:{label:"待激活",type:"warning"},active:{label:"已激活",type:"success"},expired:{label:"已过期",type:"error"},revoked:{label:"已吊销",type:"error"}},g=[{title:"授权码",key:"license_key",width:280,ellipsis:{tooltip:!0}},{title:"版本",key:"plan_type",width:100,render:e=>b[e.plan_type]||e.plan_type},{title:"状态",key:"status",width:100,render:e=>{const t=v[e.status]||{label:e.status,type:"info"};return R(q,{type:t.type,size:"small"},()=>t.label)}},{title:"到期时间",key:"expire_date",width:120,render:e=>e.expire_date?new Date(e.expire_date).toLocaleDateString("zh-CN"):"永久"},{title:"创建时间",key:"created_at",width:160,render:e=>new Date(e.created_at).toLocaleString("zh-CN")}];return C(async()=>{const e=Number(f.params.id);if(e){u.value=!0;try{const t=await w.getCustomer(e);t.code===200&&(n.value=t.data)}catch{_.error("加载失败")}finally{u.value=!1}}}),(e,t)=>(m(),D("div",null,[l(a(x),{align:"center",style:{"margin-bottom":"24px"}},{default:s(()=>[l(a(z),{onClick:t[0]||(t[0]=d=>a(y).back())},{default:s(()=>[...t[1]||(t[1]=[r("← 返回",-1)])]),_:1}),t[2]||(t[2]=B("h2",{style:{margin:"0"}},"客户详情",-1))]),_:1}),l(a(p),{title:"基本信息",style:{"margin-bottom":"16px"}},{default:s(()=>[n.value?(m(),S(a(V),{key:0,column:3},{default:s(()=>[l(a(o),{label:"用户名"},{default:s(()=>[r(i(n.value.username),1)]),_:1}),l(a(o),{label:"企业名称"},{default:s(()=>[r(i(n.value.company_name||"-"),1)]),_:1}),l(a(o),{label:"联系人"},{default:s(()=>[r(i(n.value.contact_name||"-"),1)]),_:1}),l(a(o),{label:"邮箱"},{default:s(()=>[r(i(n.value.email),1)]),_:1}),l(a(o),{label:"电话"},{default:s(()=>[r(i(n.value.phone||"-"),1)]),_:1}),l(a(o),{label:"注册时间"},{default:s(()=>[r(i(n.value.created_at?new Date(n.value.created_at).toLocaleString("zh-CN"):"-"),1)]),_:1}),l(a(o),{label:"地址",span:3},{default:s(()=>[r(i(n.value.address||"-"),1)]),_:1})]),_:1})):T("",!0)]),_:1}),l(a(p),{title:"授权记录"},{default:s(()=>{var d;return[l(a(L),{columns:g,data:((d=n.value)==null?void 0:d.licenses)||[],loading:u.value,bordered:!1},null,8,["data","loading"])]}),_:1})]))}});export{H as default};
